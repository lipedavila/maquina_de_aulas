<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Revisão para Prova de Física B — Versão Melhorada</title>

    <!-- Fontes e Ícones -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Configuração do MathJax para renderizar fórmulas LaTeX -->
    <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$','$$'], ['\\[','\\]']],
        processEscapes: true
      },
      svg: { fontCache: 'global' },
      options: {
        skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
        ignoreHtmlClass: 'tex-ignore'
      },
      startup: {
        ready: () => {
          MathJax.startup.defaultReady();
          MathJax.startup.promise.then(() => {
            console.log('MathJax inicializado com sucesso!');
          });
        }
      }
    };
    </script>
    <script id="MathJax-script" defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
    
    <!-- Adicionado Marked.js para renderizar Markdown (para o modal de IA) -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <style>
        /* Variáveis de Cor e Estilos Globais */
        :root {
            --ink: #1b1f23; --muted: #4b5563; --accent: #1a2a6c; --accent2: #b21f1f; --paper: #ffffff; --border: #e5e7eb; --box: #f8fafc;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        html, body {
            min-height: 100%;
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #1a2a6c);
            color: var(--ink);
            font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Helvetica Neue", sans-serif;
            line-height: 1.6;
            padding: 0;
        }
        .container { 
            max-width: 1200px; 
            margin: 0 auto; 
            padding: 22px;
            padding-bottom: 80px;
        }
        
        /* Cabeçalho */
        header {
            text-align: center; 
            padding: 30px 20px; 
            background: rgba(255,255,255,0.92);
            border-radius: 15px; 
            box-shadow: 0 10px 30px rgba(0,0,0,.25); 
            margin-bottom: 26px;
        }
        .header-content {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }
        .header-text {
            text-align: left;
        }
        h1 { 
            font-size: 2.2rem; 
            margin: 0 0 6px; 
            color: var(--accent); 
            text-shadow: 2px 2px 4px rgba(0,0,0,0.06); 
        }
        .subtitle { 
            color: var(--accent2); 
            font-size: 1.1rem; 
            margin: 4px 0 14px; 
        }
        .exam-info { 
            display: flex; 
            justify-content: center; 
            flex-wrap: wrap; 
            gap: 16px; 
            margin-top: 20px; 
            background: rgba(26,42,108,0.08); 
            padding: 12px; 
            border-radius: 12px; 
        }
        .info-card { 
            background: #fff; 
            padding: 12px 14px; 
            border-radius: 10px; 
            min-width: 180px; 
            box-shadow: 0 4px 8px rgba(0,0,0,0.08); 
            text-align: center;
        }
        .info-card h3 {
            font-size: 1rem;
            margin-bottom: 8px;
        }
        
        /* Seções de Conteúdo */
        .content { 
            display: grid; 
            grid-template-columns: 1fr 1fr; 
            gap: 22px; 
        }
        @media (max-width: 900px) { 
            .content { 
                grid-template-columns: 1fr; 
            } 
        }
        
        section.section {
            background: rgba(255,255,255,0.96); 
            border-radius: 15px; 
            padding: 22px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.18); 
            transition: transform .3s; 
            position: relative;
        }
        section.section:hover { 
            transform: translateY(-3px); 
        }
        h2 { 
            color: var(--accent); 
            border-bottom: 3px solid var(--accent2); 
            padding-bottom: 8px; 
            margin-bottom: 16px; 
            display: flex; 
            align-items: center; 
            gap: 8px; 
            font-size: 1.4rem;
        }
        
        /* Elementos de Conteúdo */
        .concepts { 
            padding: 14px; 
            background: rgba(26, 42, 108, 0.06); 
            border-radius: 10px; 
        }
        .concept-item { 
            margin-bottom: 10px; 
            padding-left: 18px; 
            position: relative; 
        }
        .concept-item:before { 
            content: "•"; 
            color: var(--accent2); 
            position: absolute; 
            left: 0; 
            top: 0; 
            font-weight: 700; 
        }
        .highlight { 
            background: linear-gradient(120deg, rgba(255,255,0,0.3), rgba(255,255,0,0)); 
            padding: 1px 5px; 
            border-radius: 3px; 
        }
        
        .example-question { 
            background: #fff; 
            border-left: 5px solid var(--accent); 
            padding: 16px; 
            margin: 18px 0; 
            border-radius: 0 10px 10px 0; 
            box-shadow: 0 4px 10px rgba(0,0,0,0.08); 
        }
        .question-text { 
            font-weight: 700; 
            margin-bottom: 12px; 
            color: var(--accent); 
        }
        .solution { 
            background:rgba(178,31,31,0.06); 
            padding:12px; 
            border-radius:8px; 
            margin-top:10px; 
        }
        .step { 
            margin-bottom:10px; 
            display:flex; 
            gap:12px; 
            align-items: center; 
        }
        .step-number { 
            background:#1a2a6c; 
            color:#fff; 
            width:28px; 
            height:28px; 
            border-radius:50%; 
            display:flex; 
            align-items:center; 
            justify-content:center; 
            font-weight:700; 
            flex-shrink:0; 
        }

        .formula-inline { 
            background-color: #eef2ff; 
            color: #312e81; 
            padding: 2px 6px; 
            border-radius: 4px; 
            font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace; 
            font-size: 0.9em; 
        }
        
        /* --- ESTILOS DOS NOVOS EXERCÍCIOS INTERATIVOS --- */
        .exercise-item { 
            border: 1px solid var(--border); 
            border-radius: 10px; 
            padding: 1.25rem; 
            background: #fff; 
            margin-bottom: 1.25rem; 
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }
        .k { 
            display: inline-block; 
            background: #111827; 
            color: #fff; 
            padding: 2px 10px; 
            border-radius: 8px; 
            font-size: 0.9rem; 
            margin-right: 8px; 
            font-weight: 700;
        }
        .q { 
            font-weight: 600; 
            margin-bottom: 1rem; 
            display: inline;
        }
        .options-container label { 
            display: block; 
            margin: 8px 0; 
            padding: 10px; 
            border-radius: 8px; 
            border: 1px solid #e5e7eb;
            cursor: pointer; 
            transition: background-color 0.2s, border-color 0.2s; 
        }
        .options-container label:hover { 
            background-color: #f0f4ff; 
            border-color: #c7d2fe;
        }
        .actions { 
            display: flex; 
            gap: 10px; 
            margin-top: 12px; 
            flex-wrap: wrap; 
        }
        .btn-explainer { 
            appearance: none; border: none; padding: 10px 16px; border-radius: 8px; font-weight: 600; cursor: pointer;
            background-color: #d1fae5; color: #065f46; transition: background-color 0.2s;
        }
        .btn-explainer:hover { background-color: #a7f3d0; }
        
        .explanation {
            display: none;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.9s ease-in-out, padding 0.7s ease-out, margin 0.7s ease-out;
            padding: 0 1rem;
            margin-top: 0;
        }
        .explanation.show {
            display: block;
            max-height: 2000px; /* Aumentado para conteúdo maior */
            padding: 1.25rem;
            margin-top: 1.25rem;
        }
        .ai-explanation { 
            padding: 1.25rem; 
            border-radius: 8px; 
            background: rgba(26,42,108,0.06); 
            border-left: 4px solid #818cf8; 
        }
        .ai-explanation h3 {
            font-size: 1.2rem;
            color: var(--accent);
            margin-top: 0;
            margin-bottom: 1rem;
        }
        .ai-explanation p, .ai-explanation ul, .ai-explanation ol { 
            margin-bottom: 1em; 
        }
        .svg-container {
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #F0F9FF;
            border-radius: 0.5rem;
            padding: 1rem;
            margin: 1.5rem 0;
            border: 1px solid #e0f2fe;
        }
        .q7-wave { fill: none; stroke: #007bff; stroke-width: 2.5; stroke-linecap: round; }
        .q7-axis { stroke: #adb5bd; stroke-width: 1.5; stroke-dasharray: 4 4; }
        .q7-node { fill: #17a2b8; }
        .q7-antinode { fill: #dc3545; }
        .q7-label-text { font-size: 14px; font-weight: 500; fill: #495057; text-anchor: middle; }
        .q7-arrow-line { stroke: #343a40; stroke-width: 1.5; marker-start: url(#q7-arrowhead); marker-end: url(#q7-arrowhead); }
        .q7-arrow-text { font-size: 15px; font-weight: 600; fill: #212529; text-anchor: middle; }
        .q7-connector-line { stroke: #6c757d; stroke-width: 1; stroke-dasharray: 2 2; }

        /* Card Flutuante de Feedback */
        .feedback-card {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 14px 22px;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 700;
            color: white;
            z-index: 9999;
            box-shadow: 0 4px 20px rgba(0,0,0,0.25);
            animation: fade-in-out 3.5s forwards;
            text-align: center;
        }
        .feedback-card.correct { background-color: #22c55e; } /* Verde */
        .feedback-card.incorrect { background-color: #ef4444; } /* Vermelho */
        @keyframes fade-in-out {
            0% { opacity: 0; top: 0px; }
            15% { opacity: 1; top: 20px; }
            85% { opacity: 1; top: 20px; }
            100% { opacity: 0; top: -50px; }
        }

        /* --- FIM DOS ESTILOS DOS EXERCÍCIOS --- */

        /* Assistente de IA e Modal (sem alterações) */
        .ai-assistant-trigger { text-align: right; margin-top: 12px; }
        .btn-ai-context { background-color: #f3e8ff; color: #581c87; border: 1px solid #e9d5ff; padding: 6px 10px; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 0.9rem; }
        .btn-ai-context:hover { filter: brightness(0.97); }
        .floating-ai-btn { position: fixed; bottom: 20px; right: 20px; z-index: 1000; width: 80px; height: 80px; border-radius: 50%; background: linear-gradient(135deg, #1a2a6c, #b21f1f); color: white; display: flex; flex-direction: column; align-items: center; justify-content: center; font-size: 28px; box-shadow: 0 4px 15px rgba(0,0,0,0.3); cursor: pointer; animation: pulse 2s infinite; text-align: center;}
        .floating-ai-btn span { font-size: 10px; font-weight: 600; margin-top: 4px; }
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(26, 42, 108, 0.7); } 70% { box-shadow: 0 0 0 15px rgba(26, 42, 108, 0); } 100% { box-shadow: 0 0 0 0 rgba(26, 42, 108, 0); } }
        .ai-modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); display: none; align-items: center; justify-content: center; z-index: 1000; padding: 15px; }
        .ai-modal-content { background: var(--paper); border-radius: 15px; padding: 25px; max-width: 600px; width: 100%; max-height: 90vh; box-shadow: 0 10px 40px rgba(0,0,0,0.3); position: relative; display: flex; flex-direction: column; animation: modal-fadein 0.3s; }
        @keyframes modal-fadein { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }
        .ai-modal-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--border); padding-bottom: 12px; margin-bottom: 15px; }
        .ai-modal-header h3 { margin: 0; color: var(--accent); font-size: 1.3rem;}
        .ai-modal-close { background: none; border: none; font-size: 1.5rem; cursor: pointer; color: var(--muted); padding: 5px; }
        .ai-modal-body { flex: 1; overflow-y: auto; padding: 10px 0; }
        .ai-messages { display: flex; flex-direction: column; gap: 15px; margin-bottom: 15px; }
        .message { padding: 12px 15px; border-radius: 15px; max-width: 85%; word-wrap: break-word; animation: message-appear 0.3s; }
        @keyframes message-appear { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .message-user { background-color: #e3f2fd; align-self: flex-end; border-bottom-right-radius: 5px; }
        .message-bot { background-color: #f0f4ff; align-self: flex-start; border-bottom-left-radius: 5px; }
        .message-bot p, .message-bot ul, .message-bot ol { margin-bottom: 1em; }
        .ai-input-container { display: flex; gap: 10px; margin-top: 15px; }
        .ai-input-container textarea { flex: 1; min-height: 60px; padding: 12px; border-radius: 8px; border: 1px solid var(--border); font-family: inherit; font-size: 1rem; resize: none; }
        .ai-input-container button { background-color: var(--accent); color: var(--paper); padding: 12px 16px; border: none; border-radius: 8px; font-weight: 700; cursor: pointer; min-width: 80px; }
        
        footer { text-align: center; color: #fff; margin: 22px 0; font-size: 0.9rem;}
        .tip { background: rgba(255,255,255,0.2); border-radius: 10px; padding: 12px; margin-top: 12px; display: inline-block; font-size: 0.9rem;}
        .section-icon { font-size: 1.2rem; width: 28px; height: 28px; display: inline-flex; align-items: center; justify-content: center; background: var(--accent); color: white; border-radius: 50%; margin-right: 8px; }
        
        #expired-message {
            display: none;
            text-align: center;
            padding: 50px 20px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,.25);
        }
        #expired-message h1 {
            color: var(--accent2);
            font-size: 2rem;
        }
    </style>
</head>

<body>
    <div id="main-content">
        <div class="container">
            <header>
                <div class="header-content">
                    <img src="https://sistemaanglo.com.br/wp-content/themes/sistema-anglo/assets/images/logo.svg" alt="Logo do Sistema Anglo" style="height: 120px;"/>
                    <div class="header-text">
                        <h1><i class="fas fa-atom"></i> Revisão Final para Prova de Física B</h1>
                        <p class="subtitle">Conteúdo essencial e questões resolvidas com IA para a P2</p>
                    </div>
                </div>
                <div class="exam-info">
                    <div class="info-card"><h3><i class="fas fa-book"></i> Disciplina</h3><p>Física B</p></div>
                    <div class="info-card"><h3><i class="fas fa-user-tie"></i> Professor</h3><p>Felipe d'Avila</p></div>
                    <div class="info-card"><h3><i class="fas fa-calendar"></i> Período</h3><p>2º Trimestre</p></div>
                    <div class="info-card"><h3><i class="fas fa-robot"></i> Assistente</h3><p>Bot d'Avila</p></div>
                </div>
            </header>

            <div class="content">
                <!-- Seções de conteúdo originais mantidas -->
                 <section class="section">
                    <h2><span class="section-icon"><i class="fas fa-ambulance"></i></span> Efeito Doppler</h2>
                    <div class="concepts">
                        <div class="concept-item">É a <span class="highlight">alteração da frequência</span> percebida de uma onda devido ao movimento relativo entre fonte e observador.</div>
                        <div class="concept-item"><b>Aproximação</b> &rarr; Frequência percebida <span class="highlight">AUMENTA</span> (som mais agudo).</div>
                        <div class="concept-item"><b>Afastamento</b> &rarr; Frequência percebida <span class="highlight">DIMINUI</span> (som mais grave).</div>
                        <div class="concept-item">Fórmula: <span class="formula-inline">$f' = f \left( \frac{v \pm v_o}{v \mp v_f} \right)$</span></div>
                        <div class="concept-item">Caso especial: Se $v_o = v_f$ no mesmo sentido, a distância é constante e <span class="highlight">a frequência não se altera</span>.</div>
                    </div>
                    <div class="ai-assistant-trigger">
                        <button class="btn-ai-context" onclick="openAIAssistant('Efeito Doppler')"><i class="fas fa-comment-dots"></i> Perguntar ao Bot d'Avila</button>
                    </div>
                </section>

                <section class="section">
                    <h2><span class="section-icon"><i class="fas fa-guitar"></i></span> Ondas Estacionárias</h2>
                    <div class="concepts">
                        <div class="concept-item">Formadas pela interferência de ondas em sentidos opostos.</div>
                        <div class="concept-item">Em cordas com <span class="highlight">extremidades fixas</span>, as pontas são <b>nós</b> (amplitude nula).</div>
                        <div class="concept-item">O maior comprimento de onda ($\lambda_{max}$) ocorre no 1º harmônico (n=1).</div>
                        <div class="concept-item">Fórmula do $\lambda$: <span class="formula-inline">$\lambda_n = \frac{2L}{n}$</span></div>
                    </div>
                    <div class="example-question">
                        <p class="question-text">Uma corda de violão de 60 cm vibra. Qual o maior comprimento de onda possível para essa vibração?</p>
                        <div class="solution">
                            <div class="step"><span class="step-number">1</span><div>O maior $\lambda$ ocorre para n=1 (modo fundamental).</div></div>
                            <div class="step"><span class="step-number">2</span><div>Aplicando a fórmula: $\lambda_1 = 2L = 2 \times 60 \text{ cm} = 120 \text{ cm}$</div></div>
                        </div>
                    </div>
                    <div class="ai-assistant-trigger">
                        <button class="btn-ai-context" onclick="openAIAssistant('Ondas Estacionárias')"><i class="fas fa-comment-dots"></i> Perguntar ao Bot d'Avila</button>
                    </div>
                </section>
                
                <section class="section">
                    <h2><span class="section-icon"><i class="fas fa-lightbulb"></i></span> Natureza da Luz e Interferência</h2>
                    <div class="concepts">
                        <div class="concept-item"><b>Modelo Corpuscular (Newton):</b> Não explica difração e interferência.</div>
                        <div class="concept-item"><b>Modelo Ondulatório (Huygens):</b> Explica reflexão, refração, difração e interferência.</div>
                        <div class="concept-item"><b>Interferência:</b> Só ocorre entre ondas de <span class="highlight">mesma natureza</span> (som com som, luz com luz).</div>
                        <div class="concept-item"><b>Cancelamento de Ruído:</b> Usa o princípio da <span class="highlight">interferência destrutiva</span>.</div>
                    </div>
                     <div class="ai-assistant-trigger">
                        <button class="btn-ai-context" onclick="openAIAssistant('Natureza da Luz e Interferência')"><i class="fas fa-comment-dots"></i> Perguntar ao Bot d'Avila</button>
                    </div>
                </section>

                <section class="section">
                    <h2><span class="section-icon"><i class="fas fa-satellite-dish"></i></span> Ondas Eletromagnéticas</h2>
                    <div class="concepts">
                        <div class="concept-item">Propagam-se no vácuo com velocidade $c = 3 \times 10^8$ m/s.</div>
                        <div class="concept-item">Equação Fundamental: <span class="formula-inline">$c = \lambda \cdot f$</span></div>
                        <div class="concept-item">Em ondas estacionárias, a distância entre dois nós é <span class="highlight">meio comprimento de onda</span> ($\lambda/2$).</div>
                    </div>
                    <div class="example-question">
                        <p class="question-text">Um micro-ondas opera a $f = 2,45$ GHz. Qual a distância entre os nós do campo elétrico?</p>
                        <div class="solution">
                            <div class="step"><span class="step-number">1</span><div>Calcular $\lambda$: $\lambda = \frac{c}{f} = \frac{3 \times 10^8}{2,45 \times 10^9} \approx 0,122 \text{ m}$ (12,2 cm)</div></div>
                            <div class="step"><span class="step-number">2</span><div>Distância entre nós é $\lambda/2$: $\frac{12,2 \text{ cm}}{2} = 6,1 \text{ cm}$</div></div>
                        </div>
                    </div>
                    <div class="ai-assistant-trigger">
                        <button class="btn-ai-context" onclick="openAIAssistant('Ondas Eletromagnéticas')"><i class="fas fa-comment-dots"></i> Perguntar ao Bot d'Avila</button>
                    </div>
                </section>
            </div>

            <hr style="border:none; border-top:1px dashed rgba(255,255,255,0.6); margin:22px 0;" />

            <section class="section" style="background:#fff; grid-column: 1 / -1;">
                <h2><span class="section-icon"><i class="fas fa-list-check"></i></span> Exercícios Focados na Prova</h2>
                <div id="exercise-list">
                    <!-- Os exercícios interativos serão inseridos aqui -->
                </div>
            </section>

            <footer>
                <p>Esse Arquivo é Uma Cortesia do Professor Felipe d'Avila (Itajaí - SC) Para Uso Exclusivo de Seus Alunos</p>
            <br>Este Material Expira Em: 20/08/2025</footer>
        </div>
    </div>
    
    <div id="expired-message" class="container">
        <h1><i class="fas fa-exclamation-triangle"></i> Conteúdo Indisponível</h1>
        <p class="subtitle" style="font-size: 1.2rem;">Esta Revisão Expirou em 20/08/2025</p>
    </div>

    <!-- Botão flutuante e Modal de IA (sem alterações) -->
    <div class="floating-ai-btn" onclick="openAIAssistant('Física B - Geral')">
        <i class="fas fa-robot"></i>
        <span>Bot d'Avila</span>
    </div>
    <div class="ai-modal-overlay" id="ai-assistant-modal">
        <div class="ai-modal-content" data-context="">
            <div class="ai-modal-header">
                <h3><i class="fas fa-robot"></i> Professor Virtual Bot d'Avila</h3>
                <button class="ai-modal-close" onclick="closeAIAssistant()">&times;</button>
            </div>
            <div class="ai-modal-body">
                <div class="ai-messages" id="ai-messages"></div>
                <div class="ai-input-container">
                    <textarea id="ai-question-input" placeholder="Digite sua pergunta sobre a matéria..."></textarea>
                    <button onclick="submitAIQuestion()">Enviar</button>
                </div>
            </div>
        </div>
    </div>

    <script>
    // --- LÓGICA DOS EXERCÍCIOS INTERATIVOS ---

    const exercises = [
        {
            question: "Uma fonte sonora se afasta de um observador parado. O que acontece com a frequência percebida pelo observador?",
            options: { a: "Aumenta.", b: "Diminui.", c: "Não se altera.", d: "Torna-se nula." },
            answer: 'b',
            explanation: `<h3 class="font-bold text-lg mb-2 text-accent">Análise Detalhada: Efeito Doppler no Afastamento</h3><p>O <strong>Efeito Doppler</strong> descreve a mudança na frequência de uma onda devido ao <strong>movimento relativo</strong> entre a fonte e o observador.</p><p class="mt-2">Quando a fonte se afasta, cada nova frente de onda é emitida de uma posição mais distante. Isso causa um "esticamento" aparente do comprimento de onda ($\\lambda$) que chega ao observador. Como a velocidade do som ($v$) é constante e $v = \\lambda \\cdot f$, se o comprimento de onda aumenta, a frequência ($f$) deve diminuir. Para o som, uma frequência menor é percebida como um tom mais <strong>grave</strong>.</p><div class="svg-container"><svg viewBox="0 0 400 200" class="w-full max-w-lg" aria-label="Ilustração do Efeito Doppler. Uma ambulância se afasta de um observador. As ondas sonoras atrás da ambulância estão mais espaçadas, indicando menor frequência."><circle cx="50" cy="100" r="10" fill="#3B82F6"></circle><rect x="45" y="110" width="10" height="30" fill="#3B82F6"></rect><text x="30" y="155" font-size="12" fill="#1E3A8A" font-weight="bold">Observador</text><g id="ambulance"><rect x="280" y="95" width="50" height="30" fill="#EF4444" rx="5"></rect><rect x="285" y="100" width="15" height="20" fill="white"></rect><circle cx="290" cy="125" r="7" fill="#374151" stroke="white" stroke-width="1"></circle><circle cx="320" cy="125" r="7" fill="#374151" stroke="white" stroke-width="1"></circle><rect x="305" y="90" width="10" height="5" fill="#3B82F6"></rect></g><text x="280" y="85" font-size="12" fill="#991B1B" font-weight="bold">Fonte se afastando</text><path d="M335 105 L365 105 L355 100 M365 105 L355 110" stroke="#991B1B" stroke-width="2" fill="none"></path><circle cx="280" cy="100" r="40" stroke="#60A5FA" stroke-width="1.5" fill="none" stroke-dasharray="4 2"></circle><circle cx="260" cy="100" r="80" stroke="#60A5FA" stroke-width="1.5" fill="none" stroke-dasharray="4 2"></circle><circle cx="240" cy="100" r="120" stroke="#60A5FA" stroke-width="1.5" fill="none" stroke-dasharray="4 2"></circle><circle cx="220" cy="100" r="160" stroke="#60A5FA" stroke-width="1.5" fill="none" stroke-dasharray="4 2"></circle><text x="100" y="40" font-size="12" fill="#1E3A8A">Ondas mais espaçadas</text><text x="100" y="55" font-size="12" fill="#1E3A8A">(Frequência Menor)</text></svg></div><p class="mt-4 font-bold">Conclusão: A frequência percebida pelo observador diminui. Resposta (B).</p>`
        },
        {
            question: "Uma fonte e um observador se deslocam com a mesma velocidade, no mesmo sentido e direção. A frequência ouvida pelo observador:",
            options: { a: "aumenta.", b: "diminui.", c: "não se altera.", d: "depende da velocidade do som." },
            answer: 'c',
            explanation: `<h3 class="font-bold text-lg mb-2 text-accent">Análise Detalhada: A Importância do Movimento Relativo</h3><p>O Efeito Doppler depende do <strong>movimento relativo</strong>. Se a fonte e o observador se movem com a mesma velocidade e na mesma direção, a distância entre eles permanece <strong>constante</strong>. Não há aproximação nem afastamento.</p><p class="mt-2">Como não existe movimento relativo, as frentes de onda chegam ao observador com a mesma frequência com que foram emitidas. A situação é fisicamente idêntica a um cenário onde ambos estão parados um em relação ao outro.</p><div class="svg-container"><svg viewBox="0 0 400 200" class="w-full max-w-lg" aria-label="Ilustração de uma fonte e um observador se movendo juntos. A distância entre eles é constante e as ondas sonoras são uniformes."><g><circle cx="100" cy="100" r="10" fill="#3B82F6"></circle><rect x="95" y="110" width="10" height="30" fill="#3B82F6"></rect><text x="80" y="155" font-size="12" fill="#1E3A8A" font-weight="bold">Observador</text></g><g><rect x="250" y="95" width="50" height="30" fill="#EF4444" rx="5"></rect><text x="265" y="115" font-size="14" fill="white">♪</text><text x="258" y="85" font-size="12" fill="#991B1B" font-weight="bold">Fonte</text></g><path d="M100 70 L150 70 L140 65 M150 70 L140 75" stroke="#1E3A8A" stroke-width="2" fill="none"></path><path d="M250 70 L300 70 L290 65 M300 70 L290 75" stroke="#991B1B" stroke-width="2" fill="none"></path><text x="200" y="50" font-size="12" fill="#374151" text-anchor="middle">Mesma Velocidade</text><path d="M120 100 C 130 80, 140 120, 150 100" stroke="#60A5FA" stroke-width="2" fill="none"></path><path d="M150 100 C 160 80, 170 120, 180 100" stroke="#60A5FA" stroke-width="2" fill="none"></path><path d="M180 100 C 190 80, 200 120, 210 100" stroke="#60A5FA" stroke-width="2" fill="none"></path><path d="M210 100 C 220 80, 230 120, 240 100" stroke="#60A5FA" stroke-width="2" fill="none"></path><text x="175" y="170" font-size="12" fill="#1E3A8A" text-anchor="middle">Distância relativa constante → Frequência não se altera</text></svg></div><p class="mt-4 font-bold">Conclusão: Sem movimento relativo, não há Efeito Doppler e a frequência percebida não se altera. Resposta (C).</p>`
        },
        {
            question: "Em uma corda de violão com ambas as extremidades fixas, os pontos correspondentes às extremidades são chamados de:",
            options: { a: "ventres, com amplitude máxima.", b: "nós, com amplitude nula.", c: "harmônicos, com frequência variável.", d: "cristas, com amplitude positiva." },
            answer: 'b',
            explanation: `<h3 class="font-bold text-lg mb-2 text-accent">Análise Detalhada: Ondas Estacionárias e Condições de Contorno</h3><p>A sobreposição de ondas viajando em sentidos opostos numa corda cria uma <strong>onda estacionária</strong>. Nela, existem pontos de amplitude de vibração <strong>nula</strong>, chamados de <strong>nós</strong>, e pontos de amplitude <strong>máxima</strong>, chamados de <strong>ventres</strong>.</p><p class="mt-2">Como as extremidades de uma corda de violão estão <strong>fixas</strong>, elas não podem vibrar. Portanto, por definição, as extremidades devem ser sempre <strong>nós</strong>.</p><div class="svg-container"><svg viewBox="0 0 400 200" class="w-full max-w-lg" aria-label="Ilustração de uma onda estacionária (2º harmônico) numa corda de violão."><path d="M50,100 Q125,30 200,100 T 350,100" stroke="#3B82F6" stroke-width="3" fill="none"></path><path d="M50,100 Q125,170 200,100 T 350,100" stroke="#3B82F6" stroke-width="2" fill="none" opacity="0.5"></path><circle cx="50" cy="100" r="5" fill="#1E3A8A"></circle><text x="50" y="125" font-size="14" fill="#1E3A8A" font-weight="bold" text-anchor="middle">Nó</text><circle cx="200" cy="100" r="5" fill="#1E3A8A"></circle><text x="200" y="125" font-size="14" fill="#1E3A8A" font-weight="bold" text-anchor="middle">Nó</text><circle cx="350" cy="100" r="5" fill="#1E3A8A"></circle><text x="350" y="125" font-size="14" fill="#1E3A8A" font-weight="bold" text-anchor="middle">Nó</text><text x="125" y="20" font-size="14" fill="#3B82F6" text-anchor="middle">Ventre</text><path d="M125 25 L125 35" stroke="#3B82F6" stroke-width="1.5" marker-end="url(#arrow-down)"></path><defs><marker id="arrow-down" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path d="M 0 0 L 10 5 L 0 10 z" fill="#3B82F6"></path></marker></defs></svg></div><p class="mt-4 font-bold">Conclusão: As extremidades fixas são pontos de amplitude nula, ou seja, nós. Resposta (B).</p>`
        },
        {
            question: "Qual fenômeno ondulatório NÃO pode ser explicado pelo modelo corpuscular da luz de Newton?",
            options: { a: "Reflexão.", b: "Refração.", c: "Absorção.", d: "Difração." },
            answer: 'd',
            explanation: `<h3 class="font-bold text-lg mb-2 text-accent">Análise Detalhada: Dualidade Onda-Partícula e Difração</h3><p>O <strong>modelo corpuscular</strong> de Newton via a luz como partículas em linha reta. Isso explicava bem a reflexão e a refração. No entanto, a <strong>difração</strong> — a capacidade de uma onda de contornar obstáculos e se espalhar — é um comportamento exclusivamente ondulatório. Se a luz fosse apenas partícula, projetaria uma sombra nítida, mas na realidade ela se espalha para dentro da região da sombra, o que só o <strong>modelo ondulatório</strong> explica.</p><div class="svg-container"><svg viewBox="0 0 400 200" class="w-full max-w-lg" aria-label="Ilustração da difração. Ondas planas se aproximam de uma barreira com uma fenda e se espalham em arcos após passarem por ela."><g id="incoming-waves"><text x="40" y="30" font-size="12" fill="#1E3A8A">Ondas incidentes</text><line x1="80" y1="50" x2="80" y2="150" stroke="#3B82F6" stroke-width="2"></line><line x1="60" y1="50" x2="60" y2="150" stroke="#3B82F6" stroke-width="2"></line><line x1="40" y1="50" x2="40" y2="150" stroke="#3B82F6" stroke-width="2"></line><line x1="20" y1="50" x2="20" y2="150" stroke="#3B82F6" stroke-width="2"></line></g><rect x="150" y="0" width="20" height="85" fill="#4B5563"></rect><rect x="150" y="115" width="20" height="85" fill="#4B5563"></rect><text x="160" y="75" font-size="12" fill="#000000" text-anchor="middle" font-weight="bold">Fenda</text><g id="diffracted-waves"><text x="300" y="30" font-size="12" fill="#1E3A8A">Ondas difratadas</text><path d="M 160,80 A 20,20 0 0 1 160,120" stroke="#3B82F6" stroke-width="2" fill="none"></path><path d="M 160,60 A 40,40 0 0 1 160,140" stroke="#3B82F6" stroke-width="2" fill="none"></path><path d="M 160,40 A 60,60 0 0 1 160,160" stroke="#3B82F6" stroke-width="2" fill="none"></path><path d="M 160,20 A 80,80 0 0 1 160,180" stroke="#3B82F6" stroke-width="2" fill="none"></path></g></svg></div><p class="mt-4 font-bold">Conclusão: A difração é o fenômeno que comprova o comportamento ondulatório da luz e não pode ser explicado pelo modelo corpuscular. Resposta (D).</p>`
        },
        {
            question: "É possível que uma onda sonora e uma onda de rádio (eletromagnética) sofram interferência entre si?",
            options: { a: "Sim, se tiverem a mesma frequência.", b: "Sim, se tiverem a mesma amplitude.", c: "Não, pois são de naturezas diferentes.", d: "Não, pois se propagam em velocidades diferentes." },
            answer: 'c',
            explanation: `<h3 class="font-bold text-lg mb-2 text-accent">Análise Detalhada: Princípio da Superposição e Natureza das Ondas</h3><p>O fenômeno da <strong>interferência</strong> só ocorre entre ondas da <strong>mesma natureza</strong>.</p><ul class="list-disc list-inside mt-2"><li><strong>Ondas Sonoras:</strong> São <strong>mecânicas</strong> (vibração de partículas de um meio).</li><li><strong>Ondas de Rádio:</strong> São <strong>eletromagnéticas</strong> (oscilação de campos elétricos e magnéticos).</li></ul><p class="mt-2">Como uma perturba partículas e a outra perturba campos, elas existem em "dimensões" físicas diferentes e passam uma pela outra sem interagir. É como tentar misturar um pensamento com uma pedra; não há interferência.</p><div class="svg-container"><svg viewBox="0 0 400 200" class="w-full max-w-lg" aria-label="Ilustração de uma onda sonora e uma onda de rádio se cruzando sem interagir."><g><text x="50" y="25" font-size="12" fill="#1E3A8A">Onda Sonora (Mecânica)</text><path d="M20,100 L380,100" stroke="#3B82F6" stroke-width="2" fill="none"><animate attributeName="stroke-dasharray" values="10 20; 20 10; 10 20" dur="2s" repeatCount="indefinite"></animate></path></g><g><text x="50" y="45" font-size="12" fill="#991B1B">Onda de Rádio (Eletromagnética)</text><path d="M20 100 C 70 60, 120 140, 170 100 S 270 60, 320 100 S 420 140, 420 100" stroke="#EF4444" stroke-width="2" fill="none" transform="translate(-20 0)"><animateTransform attributeName="transform" type="translate" values="0 0; -40 0; 0 0" dur="3s" repeatCount="indefinite"></animateTransform></path></g><text x="200" y="175" font-size="14" font-weight="bold" text-anchor="middle" fill="#1F2937">Não há interferência</text></svg></div><p class="mt-4 font-bold">Conclusão: A interferência não é possível porque as ondas são de naturezas fundamentalmente diferentes. Resposta (C).</p>`
        },
        {
            question: "A tecnologia de fones com cancelamento de ruído (CR) baseia-se em qual fenômeno ondulatório?",
            options: { a: "Reflexão.", b: "Difração.", c: "Interferência destrutiva.", d: "Efeito Doppler." },
            answer: 'c',
            explanation: `<h3 class="font-bold text-lg mb-2 text-accent">Análise Detalhada: Interferência Destrutiva em Ação</h3><p>Os fones com cancelamento de ruído usam a <strong>interferência destrutiva</strong>. Um microfone externo capta o ruído ambiente. Um circuito eletrônico então gera uma "anti-onda", que é idêntica à onda de ruído, mas com a fase invertida. Quando a onda de ruído e a "anti-onda" se encontram no seu ouvido, elas se cancelam, resultando em silêncio ou em uma grande redução do som.</p><div class="svg-container"><svg viewBox="0 0 400 250" class="w-full max-w-lg" aria-label="Ilustração da interferência destrutiva. Uma onda de ruído e uma onda anti-ruído se somam, resultando em uma linha reta (silêncio)."><text x="20" y="20" font-size="12" fill="#3B82F6">Onda de Ruído</text><line x1="20" y1="45" x2="380" y2="45" stroke="black" stroke-width="0.5"></line><path d="M20 45 C 70 15, 120 75, 170 45 S 270 15, 320 45 S 420 75, 380 45" stroke="#3B82F6" stroke-width="2" fill="none"></path><text x="200" y="90" font-size="24" fill="#1F2937" text-anchor="middle">+</text><text x="20" y="115" font-size="12" fill="#EF4444">Onda Anti-Ruído (fase oposta)</text><line x1="20" y1="140" x2="380" y2="140" stroke="black" stroke-width="0.5"></line><path d="M20 140 C 70 170, 120 110, 170 140 S 270 170, 320 140 S 420 110, 380 140" stroke="#EF4444" stroke-width="2" fill="none" stroke-dasharray="4 2"></path><line x1="190" y1="175" x2="210" y2="175" stroke="#1F2937" stroke-width="2"></line><line x1="190" y1="180" x2="210" y2="180" stroke="#1F2937" stroke-width="2"></line><text x="20" y="205" font-size="12" fill="#4B5563">Resultado (Interferência Destrutiva)</text><line x1="20" y1="220" x2="380" y2="220" stroke="#4B5563" stroke-width="3"></line></svg></div><p class="mt-4 font-bold">Conclusão: A tecnologia baseia-se na geração de uma onda em oposição de fase para anular o som externo através da interferência destrutiva. Resposta (C).</p>`
        },
        {
            question: "Um forno de micro-ondas produz ondas estacionárias. Se o comprimento de onda é de 12 cm, qual a distância entre um ponto de aquecimento máximo (ventre) e um ponto de aquecimento mínimo (nó)?",
            options: { a: "12 cm", b: "9 cm", c: "6 cm", d: "3 cm" },
            answer: 'd',
            explanation: `<h3 class="font-bold text-lg mb-2 text-accent">Análise Detalhada: Nós e Ventres em Ondas Estacionárias</h3><p>Dentro de um micro-ondas, formam-se ondas estacionárias com pontos de aquecimento máximo (<strong>ventres</strong>) e mínimo (<strong>nós</strong>). A geometria de uma onda estacionária é bem definida: a distância entre um nó e um ventre consecutivo é sempre <strong>um quarto do comprimento de onda ($\\lambda/4$)</strong>.</p><p class="mt-2">No problema, com $\\lambda = 12$ cm, a distância procurada é:</p><p class="text-center font-bold text-lg my-2">Distância = $\\frac{\\lambda}{4} = \\frac{12 \\text{ cm}}{4} = 3 \\text{ cm}$</p><div class="svg-container"><svg viewBox="0 0 500 220" class="w-full max-w-lg"><defs><marker id="q7-arrowhead" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto"><polygon points="0 0, 10 3.5, 0 7" fill="#343a40"></polygon></marker></defs><line x1="0" y1="100" x2="500" y2="100" class="q7-axis"></line><path d="M 20 100 Q 80 20, 140 100 T 260 100 T 380 100 T 500 100" class="q7-wave"></path><path d="M 20 100 Q 80 180, 140 100 T 260 100 T 380 100 T 500 100" class="q7-wave"></path><circle cx="140" cy="100" r="5" class="q7-node"></circle><circle cx="260" cy="100" r="5" class="q7-node"></circle><circle cx="380" cy="100" r="5" class="q7-node"></circle><line x1="140" y1="100" x2="140" y2="140" class="q7-connector-line"></line><text x="140" y="155" class="q7-label-text">Nó (frio)</text><circle cx="80" cy="100" r="5" class="q7-antinode"></circle><circle cx="200" cy="100" r="5" class="q7-antinode"></circle><circle cx="320" cy="100" r="5" class="q7-antinode"></circle><line x1="200" y1="100" x2="200" y2="30" class="q7-connector-line"></line><text x="200" y="20" class="q7-label-text">Ventre (quente)</text><line x1="140" y1="180" x2="380" y2="180" class="q7-arrow-line"></line><text x="260" y="200" class="q7-arrow-text">λ = 12 cm</text><line x1="140" y1="60" x2="200" y2="60" class="q7-arrow-line"></line><text x="170" y="50" class="q7-arrow-text">λ/4 = 3 cm</text></svg></div><p class="mt-4 font-bold">Conclusão: A distância entre um ponto de aquecimento máximo e um mínimo é de $\\lambda/4$, resultando em 3 cm. Resposta (D).</p>`
        }
    ];

    function loadExercises() {
        const list = document.getElementById('exercise-list');
        if (!list) return;

        let html = '';
        exercises.forEach((ex, index) => {
            html += `
            <div class="exercise-item">
                <p><span class="k">Q${index + 1}</span><span class="q"> ${ex.question}</span></p>
                <div class="options-container mt-4" id="options-${index}">`;
            
            for (const key in ex.options) {
                html += `
                <label>
                    <input type="radio" name="q${index}" value="${key}" onclick="checkAnswer(${index}, '${key}')">
                    <span class="font-bold">(${key.toUpperCase()})</span> ${ex.options[key]}
                </label>`;
            }

            html += `
                </div>
                <div class="actions mt-4">
                    <button class="btn-explainer" onclick="toggleExplanation('explanation${index}')">
                        <i class="fas fa-robot"></i> Explicação do Bot d'Avila
                    </button>
                </div>
                <div id="explanation${index}" class="explanation ai-explanation">
                    ${ex.explanation}
                </div>
            </div>`;
        });
        list.innerHTML = html;
        if (window.MathJax) { MathJax.typesetPromise(); }
    }

    function checkAnswer(index, selectedKey) {
        const existingCard = document.querySelector('.feedback-card');
        if (existingCard) {
            existingCard.remove();
        }

        const exercise = exercises[index];
        const isCorrect = exercise.answer === selectedKey;
        
        const feedbackCard = document.createElement('div');
        feedbackCard.classList.add('feedback-card');

        if (isCorrect) {
            feedbackCard.classList.add('correct');
            feedbackCard.innerHTML = `<span><i class="fas fa-check-circle"></i> Certo!</span>`;
        } else {
            feedbackCard.classList.add('incorrect');
            const correctOptionText = `(${exercise.answer.toUpperCase()}) ${exercise.options[exercise.answer]}`;
            feedbackCard.innerHTML = `<span><i class="fas fa-times-circle"></i> Ops!</span><br><small style="font-weight: 500;">A resposta certa é: ${correctOptionText}</small>`;
        }

        document.body.appendChild(feedbackCard);

        setTimeout(() => {
            feedbackCard.remove();
        }, 3500);
    }
    
    function toggleExplanation(elementId) {
        const explanationDiv = document.getElementById(elementId);
        const button = explanationDiv.previousElementSibling.querySelector('.btn-explainer');
        const isShown = explanationDiv.classList.contains('show');

        if (isShown) {
            explanationDiv.classList.remove('show');
            button.innerHTML = `<i class="fas fa-robot"></i> Explicação do Bot d'Avila`;
        } else {
            explanationDiv.classList.add('show');
            button.innerHTML = `<i class="fas fa-eye-slash"></i> Ocultar Explicação`;
            if (window.MathJax) {
                MathJax.typesetPromise([explanationDiv]).catch(err => console.warn('Erro no MathJax:', err));
            }
        }
    }
    
    document.addEventListener('DOMContentLoaded', function() {
        // --- LÓGICA DE EXPIRAÇÃO COM API ONLINE ---
        async function checkExpirationAndLoad() {
            // A data de expiração está codificada como um timestamp para não ser facilmente legível.
            // Timestamp para 20 de Agosto de 2025, 00:00:00 GMT-0300 (Horário Padrão de Brasília)
            const expirationTimestamp = 1755692400000;
            let now;

            try {
                // Tenta obter a hora de um servidor online para evitar manipulação
                const response = await fetch('https://worldtimeapi.org/api/timezone/Etc/UTC');
                if (!response.ok) {
                    // Se a API falhar (ex: erro 500), lança um erro para ir para o catch
                    throw new Error('Server response not OK');
                }
                const data = await response.json();
                now = data.unixtime * 1000;
                console.log("Data obtida do servidor online.");
            } catch (error) {
                // Se a busca online falhar (sem internet, API offline), usa a hora local como fallback
                console.warn("Não foi possível obter a data do servidor. Usando a hora local como fallback.", error);
                now = new Date().getTime();
            }

            if (now > expirationTimestamp) {
                document.getElementById('main-content').style.display = 'none';
                document.getElementById('expired-message').style.display = 'block';
                const floatingBtn = document.querySelector('.floating-ai-btn');
                if(floatingBtn) floatingBtn.style.display = 'none';
            } else {
                loadExercises();
            }
        }

        checkExpirationAndLoad();

        // --- LÓGICA DO ASSISTENTE DE IA ---
        window.addEventListener('click', (event) => { if (event.target === aiModal) closeAIAssistant(); });
        window.addEventListener('keydown', (event) => { if (event.key === 'Escape') closeAIAssistant(); });
        aiQuestionInput.addEventListener('keydown', (e) => { if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); submitAIQuestion(); } });
    });

    // --- Lógica do Assistente de IA com Histórico (sem alterações) ---
    const aiModal = document.getElementById('ai-assistant-modal');
    const aiQuestionInput = document.getElementById('ai-question-input');
    const aiMessagesDiv = document.getElementById('ai-messages');
    let chatHistory = []; 

    function openAIAssistant(context) {
        aiModal.style.display = 'flex';
        aiModal.querySelector('.ai-modal-content').dataset.context = context;
        aiQuestionInput.value = '';
        document.body.style.overflow = 'hidden';
        renderChatHistory(); 
    }

    function closeAIAssistant() {
        aiModal.style.display = 'none';
        document.body.style.overflow = '';
    }

    function renderChatHistory() {
        aiMessagesDiv.innerHTML = '';
        const welcomeMessageHTML = `<div class="message message-bot" id="welcome-message">
            <p>Olá! Sou o Bot d'Avila. Como posso ajudar com seus estudos de Física para a P2?</p>
        </div>`;

        if (chatHistory.length === 0) {
            aiMessagesDiv.innerHTML = welcomeMessageHTML;
        } else {
            chatHistory.forEach(msg => {
                const messageEl = document.createElement('div');
                messageEl.className = `message message-${msg.role}`;
                messageEl.innerHTML = msg.content;
                aiMessagesDiv.appendChild(messageEl);
            });
        }
        aiMessagesDiv.scrollTop = aiMessagesDiv.scrollHeight;
        if (window.MathJax) {
            MathJax.typesetPromise([aiMessagesDiv]).catch(err => console.warn('Erro no MathJax:', err));
        }
    }
    
    function generateContextualPrompt(newQuestion, context) {
        let historyString = "Histórico da conversa:\n";
        chatHistory.forEach(msg => { historyString += `${msg.role === 'user' ? 'Aluno' : 'Bot'}: ${msg.content}\n`; });
        const prompt = `Você é o Bot d'Avila, um professor de física. Mantenha o contexto da conversa. O aluno estuda sobre "${context}" e pergunta: "${newQuestion}". Responda de forma didática, usando LaTeX ($...$ ou $$...$$).`;
        return prompt;
    }

    async function submitAIQuestion() {
        const userQuestion = aiQuestionInput.value.trim();
        if (!userQuestion) return;
        chatHistory.push({ role: 'user', content: userQuestion });
        renderChatHistory();
        aiQuestionInput.value = '';
        const context = aiModal.querySelector('.ai-modal-content').dataset.context;
        const prompt = generateContextualPrompt(userQuestion, context);
        
        // Simulação de chamada de API para manter a funcionalidade do modal
        const loadingElement = document.createElement('div');
        loadingElement.className = 'message message-bot message-loading';
        loadingElement.innerHTML = '<p><i class="fas fa-spinner fa-spin"></i> Bot d\'Avila está pensando...</p>';
        aiMessagesDiv.appendChild(loadingElement);
        aiMessagesDiv.scrollTop = aiMessagesDiv.scrollHeight;

        setTimeout(() => {
            loadingElement.remove();
            const botResponseText = "Esta é uma resposta simulada. A funcionalidade de IA para perguntas abertas pode ser integrada aqui.";
            chatHistory.push({ role: 'bot', content: marked.parse(botResponseText) });
            renderChatHistory();
        }, 1500);
    }
    </script>
</body>
</html>
